/*! angularjs-wizard 22-07-2015 */
!function(a,b){"use strict";angular.module("angularjs-wizard.config",[]).value("angularjs-wizard.config",{debug:!0}),angular.module("angularjs-wizard.directives",[]),angular.module("angularjs-wizard.filters",[]),angular.module("angularjs-wizard",["angularjs-wizard.config","angularjs-wizard.directives","angularjs-wizard.filters"]),angular.module("angularjs-wizard.directives").directive("otFormWizard",function(){return{restrict:"E",template:'<div class="box gradient"><div class="title"><h4><span>{{title}}</span></h4></div><div class="content noPad clearfix"><div ng-form id="{{id}}Wizard" class="form-horizontal ui-formwizard"><div class="msg"></div><div ng-transclude></div><div class="form-actions full"><button class="btn pull-left ui-wizard-content ui-formwizard-button" type="reset" value="Back" ng-click="previous()" ng-disabled="isPreviousAllowed()"> Back </button><button class="btn pull-right ui-wizard-content ui-formwizard-button" type="submit" value="Next" ng-click="next()" ng-disabled="!isNextAllowed()"><span ng-show="displayNext()"> Next </span><span ng-hide="displayNext()"> Submit </span></button></div></div></div>',transclude:!0,replace:!0,require:["otFormWizard"],scope:{submitFunction:"&formSubmit",model:"="},link:function(a,b,c,d){a.formWizardCtrl=d[0],a.title=c.title||"wizard form",a.id=c.id||"wizard1",a.next=function(){a.formWizardCtrl.$next()},a.previous=function(){a.formWizardCtrl.$previous()},a.isPreviousAllowed=function(){return 0===a.formWizardCtrl.currentStep},a.isNextAllowed=function(){return a.formWizardCtrl.content[a.formWizardCtrl.currentStep]&&!a.formWizardCtrl.content[a.formWizardCtrl.currentStep].$valid()?!1:a.formWizardCtrl.currentStep<a.formWizardCtrl.steps.length},a.displayNext=function(){return a.formWizardCtrl.currentStep<a.formWizardCtrl.steps.length-1},a.formWizardCtrl.$init()},controller:function(a){var b=this;b.steps=[],b.content=[],b.currentStep=0,b.$addStep=function(a){b.steps.push(a)},b.$addStepContent=function(a){b.content.push(a)},b.$removeStep=function(a){var c=0,d=0;angular.forEach(b.steps,function(b){b.$name===a.name&&(d=c),c++}),b.steps.splice(d,1)},b.$removeStepContent=function(a){var c=0,d=0;angular.forEach(b.content,function(b){b.$name===a.name&&(d=c),c++}),b.content.splice(d,1)},b.$hideAll=function(){angular.forEach(b.steps,function(a){a.$hide()}),angular.forEach(b.content,function(a){a.$hide()})},b.$next=function(){b.content[b.currentStep].$update(),b.$hideAll(),b.currentStep++,b.currentStep<b.steps.length&&b.currentStep<b.content.length?(b.content[b.currentStep].$populateModel(a.model),b.steps[b.currentStep].$show(),b.content[b.currentStep].$show()):(b.currentStep=b.steps.length,a.submitFunction({model:a.model}))},b.$previous=function(){b.content[b.currentStep].$update(),b.$hideAll(),b.currentStep--,b.currentStep>=0?(b.content[b.currentStep].$populateModel(a.model),b.steps[b.currentStep].$show(),b.content[b.currentStep].$show()):b.currentStep=0},b.$update=function(b){angular.extend(a.model,b)},b.$init=function(){b.currentStep=0,b.$hideAll(),b.content[b.currentStep].$populateModel(a.model),b.steps[b.currentStep].$show(),b.content[b.currentStep].$show()}}}}).directive("otWizardSteps",function(){return{restrict:"E",template:'<div class="wizard-steps clearfix show" ng-transclude></div>',transclude:!0,replace:!0}}).directive("otWizardStep",function(){return{restrict:"E",template:'<div class="{{stepClass}}" ><div class="donut"><span class="{{iconClass}}"><span ng-hide="stepDisplayed">{{stepNumber}}</span></span></div><span class="txt" ng-transclude></span></div>',require:["^otFormWizard","otWizardStep"],transclude:!0,replace:!0,scope:{stepNumber:"@"},link:function(a,b,c,d){a.formWizardCtrl=d[0],a.stepCtrl=d[1],a.stepCtrl.$name=c.stepNum||0,a.formWizardCtrl.$addStep(a.stepCtrl),a.stepClass="wstep",a.iconClass="",a.stepWasDisplayed=!1,a.stepDisplayed=!1,b.bind("$destroy",function(){a.formWizardCtrl.$removeStep(a.stepCtrl)})},controller:function(a){var b=this;b.$name="",b.$show=function(){a.stepClass="wstep current",a.stepWasDisplayed=!0},b.$hide=function(){if(a.stepClass="wstep",a.stepWasDisplayed){a.stepDisplayed=!0;var b=!0;angular.forEach(a.formWizardCtrl.content,function(c){c&&c.$name===a.stepNumber&&(b=c.$valid())}),b?(a.stepClass="wstep done",a.iconClass="icon16 iconic-icon-checkmark"):(a.stepClass="wstep done",a.iconClass="icon16 iconic-icon-denied")}}}}}).directive("otWizardStepContent",function(){return{restrict:"E",template:'<div class="step ui-formwizard-content" id="uiform{{stepNumber}}" ng-show="visible" ><div ng-form name="uiform{{stepNumber}}"><div ng-transclude></div></div></div>',require:["^otFormWizard","otWizardStepContent"],transclude:!0,scope:{stepNumber:"@"},link:function(a,b,c,d){a.wizardModel={},a.formWizardCtrl=d[0],a.stepCtrl=d[1],a.stepCtrl.$name=a.stepNumber,a.formWizardCtrl.$addStepContent(a.stepCtrl),a.visible=!1,b.bind("$destroy",function(){a.formWizardCtrl.$removeStepContent(a.stepCtrl)})},controller:function(a){var b=this;b.$name="",b.$show=function(){a.visible=!0},b.$hide=function(){a.visible=!1},b.$valid=function(){return a["uiform"+a.stepNumber].$valid},b.$update=function(){var b="uiform"+a.stepNumber,c=a[b],d={};angular.forEach(c,function(a,b){a&&a.hasOwnProperty("$modelValue")&&(d[b]=a.$modelValue)}),a.formWizardCtrl.$update(d)},b.$populateModel=function(b){a.wizardModel=b,a.$$childHead.wizardModel=a.wizardModel}}}})}(window,document);